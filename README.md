# PR Reviewer Assignment Service

> **–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Å—Ç–∞–∂—ë—Ä–∞ Backend (–æ—Å–µ–Ω–Ω—è—è –≤–æ–ª–Ω–∞ 2025)**

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≤—å—é–≤–µ—Ä–æ–≤ –Ω–∞ Pull Request'—ã —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥–∞–º–∏ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#-–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–í–æ–ø—Ä–æ—Å—ã –∏ —Ä–µ—à–µ–Ω–∏—è](#-–≤–æ–ø—Ä–æ—Å—ã-–∏-—Ä–µ—à–µ–Ω–∏—è)

---

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

–°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –¥–æ 2 —Ä–µ–≤—å—é–≤–µ—Ä–æ–≤ –Ω–∞ Pull Request –∏–∑ –∫–æ–º–∞–Ω–¥—ã –∞–≤—Ç–æ—Ä–∞, —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≤—å—é –ø—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≤—å—é–≤–µ—Ä–æ–≤** - –¥–æ 2 –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–∑ –∫–æ–º–∞–Ω–¥—ã –∞–≤—Ç–æ—Ä–∞  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–∞–º–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é** - –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º —Ä–µ–≤—å—é  
‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π (merge)  
‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - Bearer —Ç–æ–∫–µ–Ω—ã –¥–ª—è admin –∏ user —Ä–æ–ª–µ–π  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - Prometheus –º–µ—Ç—Ä–∏–∫–∏ + Grafana –¥–∞—à–±–æ—Ä–¥—ã  
‚úÖ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 2000+ RPS –ø—Ä–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–∏ 5 RPS

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **–Ø–∑—ã–∫**: Go 1.25
- **Web Framework**: Gin (HTTP —Ä–æ—É—Ç–µ—Ä –∏ middleware)
- **ORM**: GORM (—Ä–∞–±–æ—Ç–∞ —Å –ë–î)
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: golang-migrate
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: zerolog (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON –ª–æ–≥–∏)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: go-playground/validator

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–°–£–ë–î**: PostgreSQL 16
- **–î—Ä–∞–π–≤–µ—Ä**: pgx/v5
- **Connection pooling**: GORM –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—É–ª

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–ú–µ—Ç—Ä–∏–∫–∏**: Prometheus client
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: Grafana
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã**: `/metrics` –¥–ª—è Prometheus scraping

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker + Docker Compose
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: testify, go-mock
- **–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Apache Bench (ab)
- **–õ–∏–Ω—Ç–∏–Ω–≥**: golangci-lint (28 –ª–∏–Ω—Ç–µ—Ä–æ–≤)

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
avitoTechAutumn2025/
‚îú‚îÄ‚îÄ cmd/api/                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ internal/                  # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞ (–Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è)
‚îÇ   ‚îú‚îÄ‚îÄ api/                   # HTTP —Å–ª–æ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/          # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/        # Middleware (auth, logging, metrics, recovery, cors)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server/            # HTTP —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ config/                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ env
‚îÇ   ‚îú‚îÄ‚îÄ domain/                # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.go          # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.go         # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errors.go          # –î–æ–º–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ service/               # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.go         # –ë–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ team.go            # –õ–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.go            # –õ–æ–≥–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pullRequest.go     # –õ–æ–≥–∏–∫–∞ PR –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≤—å—é–≤–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ storage/               # –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gorm/              # GORM —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ models.go      # –ë–î –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ team.go        # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ user.go        # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ pullrequest.go # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π PR
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ txmanager.go   # –ú–µ–Ω–µ–¥–∂–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ logger/                # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ metrics/               # Prometheus –º–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ mocks/                 # –ú–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ (go generate)
‚îú‚îÄ‚îÄ migrations/                # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ 001_init.up.sql
‚îú‚îÄ‚îÄ tests/                     # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ unit/                  # –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (handlers, middleware, service)
‚îÇ   ‚îú‚îÄ‚îÄ integration/           # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ e2e/                   # End-to-end —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ load/                  # –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ grafana/                   # Grafana –¥–∞—à–±–æ—Ä–¥—ã –∏ provisioning
‚îú‚îÄ‚îÄ prometheus/                # Prometheus –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml         # Production –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ docker-compose.test.yml    # –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ Dockerfile                 # –û–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Makefile                   # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º
‚îú‚îÄ‚îÄ golangci.yml              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–∞
‚îú‚îÄ‚îÄ openapi.yml               # OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îî‚îÄ‚îÄ .env                      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞—Ç—å –∏–∑ –ø—Ä–∏–º–µ—Ä–∞)
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

- **Clean Architecture** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (handlers ‚Üí service ‚Üí storage)
- **Repository Pattern** - –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **Dependency Injection** - –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã
- **Transaction Manager** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- **Domain-Driven Design** - –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏ –æ—à–∏–±–∫–∏

### –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
HTTP Request
     ‚Üì
[Middleware] ‚Üê auth, logging, metrics, recovery, cors
     ‚Üì
[Handlers] ‚Üê –≤–∞–ª–∏–¥–∞—Ü–∏—è, –º–∞–ø–ø–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
     ‚Üì
[Service] ‚Üê –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
     ‚Üì
[Storage] ‚Üê —Ä–∞–±–æ—Ç–∞ —Å –ë–î (GORM)
     ‚Üì
PostgreSQL
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker 20.10+
- Docker Compose 1.29+
- Go 1.25+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- Make (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/FireFly4ik/avitoTechAutumn2025.git
cd avitoTechAutumn2025
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# App
APP_PORT=8080
APP_PRODUCTION_TYPE=production
APP_LOG_PATH=./logs/app.log

# Database
DB_HOST=db
DB_PORT=5432
DB_USER=avito
DB_PASSWORD=avito_password
DB_NAME=avito_tech
DB_SSLMODE=disable

# Auth tokens
ADMIN_TOKEN=admin
USER_TOKEN=user
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

#### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞ (API + PostgreSQL + Prometheus + Grafana)
sudo docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo docker-compose logs -f api
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: Make –∫–æ–º–∞–Ω–¥–∞

```bash
make docker-up
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
curl http://localhost:8080/metrics

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
curl -X POST http://localhost:8080/team/add \
  -H "Content-Type: application/json" \
  -d '{
    "team_name": "backend-team",
    "members": [
      {"user_id": "u1", "username": "Alice", "is_active": true},
      {"user_id": "u2", "username": "Bob", "is_active": true},
      {"user_id": "u3", "username": "Charlie", "is_active": true}
    ]
  }'

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–∞–Ω–¥–µ (—Ç—Ä–µ–±—É–µ—Ç USER –∏–ª–∏ ADMIN —Ç–æ–∫–µ–Ω)
curl http://localhost:8080/team/get?team_name=backend-team \
  -H "Authorization: Bearer user"
```

### 5. –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

| –°–µ—Ä–≤–∏—Å | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|----------|
| API | http://localhost:8080 | REST API —Å–µ—Ä–≤–∏—Å–∞ |
| Metrics | http://localhost:8080/metrics | Prometheus –º–µ—Ç—Ä–∏–∫–∏ |
| Grafana | http://localhost:3000 | –î–∞—à–±–æ—Ä–¥—ã (admin/admin) |
| Prometheus | http://localhost:9090 | Prometheus UI |
| PostgreSQL | localhost:5433 | –ë–î (avito/avito_password) |

---

### –ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–∞–π–ª–µ [`openapi.yml`](./openapi.yml)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

- **Unit —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (handlers, middleware, service)
- **Integration —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- **E2E —Ç–µ—Å—Ç—ã** - end-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ API
- **Load —Ç–µ—Å—Ç—ã** - –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
make test-all

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä–æ)
make test-unit

# Unit —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
make test-unit-cover

# Integration —Ç–µ—Å—Ç—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—É—é –ë–î)
make test-integration

# E2E —Ç–µ—Å—Ç—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
make test-e2e

# –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π API)
make test-load
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ | –°—Ç–∞—Ç—É—Å |
|------------|------------------|-------------|--------|
| RPS | ‚â• 5 | 3500-4300 | ‚úÖ |
| –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ P95 | < 300 –º—Å | 2-13 –º—Å | ‚úÖ |
| Success Rate | ‚â• 99.9% | 100% | ‚úÖ |

#### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º

| –û–ø–µ—Ä–∞—Ü–∏—è | RPS | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è | P95 |
|----------|-----|---------------|-----|
| GET /team/get | 4338 | 2.3 –º—Å | 4 –º—Å |
| GET /users/getReview | 5435 | 1.8 –º—Å | 3 –º—Å |
| POST /users/setIsActive | 3500 | 1.4 –º—Å | 2 –º—Å |
| POST /pullRequest/create | 226 | 4.4 –º—Å | 8 –º—Å |

–ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç: [`tests/load/LOAD_TESTING.md`](./tests/load/LOAD_TESTING.md)

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Prometheus –º–µ—Ç—Ä–∏–∫–∏

–°–µ—Ä–≤–∏—Å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/metrics`:

- **HTTP –º–µ—Ç—Ä–∏–∫–∏**: `http_requests_total`, `http_request_duration_seconds`
- **Database –º–µ—Ç—Ä–∏–∫–∏**: `db_queries_total`, `db_query_duration_seconds`
- **Service –º–µ—Ç—Ä–∏–∫–∏**: `service_operations_total`, `service_operation_duration_seconds`

### Grafana –¥–∞—à–±–æ—Ä–¥—ã

–ü—Ä–µ–¥–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

1. **HTTP Performance** - –º–µ—Ç—Ä–∏–∫–∏ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤, RPS, latency
2. **Database Performance** - –º–µ—Ç—Ä–∏–∫–∏ –ë–î, query time, pool connections
3. **Service Teams** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
4. **Pull Requests** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ PR –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è–º
5. **Application Logs** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è JSON –ª–æ–≥–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (Loki + Promtail)

–î–æ—Å—Ç—É–ø: http://localhost:3000 (admin/admin)

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ Grafana

–õ–æ–≥–∏ –∏–∑ `./logs/app.log` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ **Loki** –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Grafana:

- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ request_id** - –æ—Ç—Å–ª–µ–¥–∏—Ç—å –≤–µ—Å—å –ø—É—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ level** - error, warn, info, debug
- **–ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É** - –Ω–∞–π—Ç–∏ –ª—é–±—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ª–æ–≥–∞—Ö
- **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –ª–æ–≥–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

```bash
# –û—Ç–∫—Ä—ã—Ç—å –¥–∞—à–±–æ—Ä–¥ –ª–æ–≥–æ–≤
open http://localhost:3000/d/logs-dashboard
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

#### Docker Logs (stdout)

–õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Docker:

```bash
# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
make docker-logs
# –∏–ª–∏
docker-compose logs -f api

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
make docker-logs-tail
```

#### –§–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏

–ë–ª–∞–≥–æ–¥–∞—Ä—è volume mapping –≤ `docker-compose.yml`, –ª–æ–≥–∏ —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `./logs/app.log`:

```bash
# –°–ª–µ–¥–∏—Ç—å –∑–∞ —Ñ–∞–π–ª–æ–º –ª–æ–≥–æ–≤
make logs-file
# –∏–ª–∏
tail -f logs/app.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
make logs-file-tail

# –ü–æ–∏—Å–∫ –≤ –ª–æ–≥–∞—Ö
make logs-search SEARCH="error"
make logs-search SEARCH="user_id=u1"

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
make clean-logs
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–≤–æ–π–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

‚úÖ **Docker logs** - –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ `docker-compose logs`  
‚úÖ **–§–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏** - —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ, –ø–µ—Ä–µ–∂–∏–≤–∞—é—Ç —Ä–µ—Å—Ç–∞—Ä—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞  
‚úÖ **JSON —Ñ–æ—Ä–º–∞—Ç** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –ª–µ–≥–∫–æ –ø–∞—Ä—Å–∏—Ç—å  
‚úÖ **Rotation –≥–æ—Ç–æ–≤** - –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å logrotate –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤

---

## üíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# Go –º–æ–¥—É–ª–∏
make deps

# –õ–∏–Ω—Ç–µ—Ä (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
brew install golangci-lint  # macOS
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –ë–î
docker-compose up -d db

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
# –ò–∑–º–µ–Ω–∏—Ç—å DB_HOST=localhost

# –ó–∞–ø—É—Å–∫ API –ª–æ–∫–∞–ª—å–Ω–æ
make run

# –ò–ª–∏ —á–µ—Ä–µ–∑ go
go run cmd/api/main.go
```

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

```bash
# –õ–∏–Ω—Ç–∏–Ω–≥
make lint

# –õ–∏–Ω—Ç–∏–Ω–≥ —Å –∞–≤—Ç–æ—Ñ–∏–∫—Å–æ–º
make lint-fix

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make fmt

# Go vet –ø—Ä–æ–≤–µ—Ä–∫–∞
make vet

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
make pre-commit
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–∫–æ–≤

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–∫–æ–≤
make mocks

# –ú–æ–∫–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –≤ internal/mocks/
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–∞

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **golangci-lint** —Å 28 –≤–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –ª–∏–Ω—Ç–µ—Ä–∞–º–∏:

**–û—Å–Ω–æ–≤–Ω—ã–µ –ª–∏–Ω—Ç–µ—Ä—ã:**
- `errcheck`, `gosimple`, `govet`, `staticcheck` - –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- `gofmt`, `goimports` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `gosec` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `gocognit`, `cyclop`, `funlen` - –º–µ—Ç—Ä–∏–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- `bodyclose`, `rowserrcheck`, `sqlclosecheck` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- `errorlint`, `wrapcheck` - —Ä–∞–±–æ—Ç–∞ —Å –æ—à–∏–±–∫–∞–º–∏

–ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: [`golangci.yml`](./golangci.yml)

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã –∏ —Ä–µ—à–µ–Ω–∏—è

> –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤, –≤–æ–∑–Ω–∏–∫—à–∏—Ö –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –∏ –ø—Ä–∏–Ω—è—Ç—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. **–§–ª–∞–≥ `needMoreReviewers` –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω**

**–í–æ–ø—Ä–æ—Å:** –í –¢–ó —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è —Ñ–ª–∞–≥ `needMoreReviewers` –¥–ª—è PR, –Ω–æ –µ–≥–æ —Ç–æ—á–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –æ–ø–∏—Å–∞–Ω–æ.

**–†–µ—à–µ–Ω–∏–µ:** –§–ª–∞–≥ **–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω**, —Ç.–∫.:
- –í –¢–ó —Å–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ PR –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –¥–æ 2 —Ä–µ–≤—å—é–≤–µ—Ä–æ–≤, –∞ –Ω–µ –±–æ–ª–µ–µ, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å —ç—Ç–∏–º —Ñ–ª–∞–≥–æ–º

---

### 2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ Bearer —Ç–æ–∫–µ–Ω—ã**

**–í–æ–ø—Ä–æ—Å:** –¢–ó —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤, –Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è Bearer token –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
- `ADMIN_TOKEN` - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ü–∏—è–º
- `USER_TOKEN` - –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ –æ–ø–µ—Ä–∞—Ü–∏—è–º —á—Ç–µ–Ω–∏—è
- –¢–æ–∫–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization
- –í –∫–æ–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ –≤ `.env`, —Ç–∞–∫ –∫–∞–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è

---

### 3. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ merge**

**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å merge —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó?

**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞:
```go
if pr.Status == domain.StatusMerged {
// –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–µ–∑ –æ—à–∏–±–∫–∏
return pr, nil
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ merge –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Ä–µ–º—è —Å–ª–∏—è–Ω–∏—è
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ PR
- –û–ø–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–∞ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø–æ–≤—Ç–æ—Ä–∞—Ö

---

### 4. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å:

```sql
teams
‚îú‚îÄ‚îÄ team_name (PK)
‚îú‚îÄ‚îÄ created_at
‚îî‚îÄ‚îÄ updated_at

users
‚îú‚îÄ‚îÄ user_id (PK)
‚îú‚îÄ‚îÄ username
‚îú‚îÄ‚îÄ team_name (FK ‚Üí teams)
‚îú‚îÄ‚îÄ is_active
‚îú‚îÄ‚îÄ created_at
‚îî‚îÄ‚îÄ updated_at

pull_requests
‚îú‚îÄ‚îÄ pull_request_id (PK)
‚îú‚îÄ‚îÄ pull_request_name
‚îú‚îÄ‚îÄ author_id (FK ‚Üí users)
‚îú‚îÄ‚îÄ status (ENUM: OPEN, MERGED)
‚îú‚îÄ‚îÄ created_at
‚îú‚îÄ‚îÄ updated_at
‚îî‚îÄ‚îÄ merged_at

pull_request_reviewers (—Å–≤—è–∑—å –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º)
‚îú‚îÄ‚îÄ pull_request_id (FK ‚Üí pull_requests)
‚îú‚îÄ‚îÄ reviewer_id (FK ‚Üí users)
‚îî‚îÄ‚îÄ PRIMARY KEY (pull_request_id, reviewer_id)
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã:**
- `idx_pr_reviewers_reviewer` - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ PR –ø–æ —Ä–µ–≤—å—é–≤–µ—Ä—É
- `idx_pr_status` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö PR
- `idx_users_team_active` - –≤—ã–±–æ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥—ã
- `idx_pr_author` - –ø–æ–∏—Å–∫ PR –ø–æ –∞–≤—Ç–æ—Ä—É

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at` –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü

---

### 5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –Ω–∞ –≤—Å–µ—Ö —Å–ª–æ—è—Ö?

**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ç—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—à–∏–±–æ–∫:

1. **Storage errors** (`internal/storage/errors.go`):
```go
var (
ErrNotFound      = errors.New("not found")
ErrAlreadyExists = errors.New("already exists")
ErrConflict      = errors.New("conflict")
)
```

2. **Domain errors** (`internal/domain/errors.go`):
```go
var (
ErrResourceNotFound = NewError(404, "NOT_FOUND", "resource not found")
ErrPRExists        = NewError(400, "PR_EXISTS", "PR already exists")
ErrTeamExists      = NewError(400, "TEAM_EXISTS", "team already exists")
ErrReassignOnMerged = NewError(400, "PR_MERGED", "cannot modify merged PR")
)
```

3. **HTTP errors** (`internal/api/handlers/errors.go`):
```go
func (h *Handler) handleError(c *gin.Context, err error) {
if domainErr, ok := err.(*domain.Error); ok {
c.JSON(domainErr.HTTPCode, gin.H{
"error": gin.H{
"code":    domainErr.Code,
"message": domainErr.Message,
},
})
}
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –õ–µ–≥–∫–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥–æ–≤:**
- **400 Bad Request** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–µ–≤–µ—Ä–Ω—ã–π JSON, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è) (–±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
- **401 Unauthorized** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **403 Forbidden** - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ (—Ç—Ä–µ–±—É–µ—Ç—Å—è ADMIN —Ç–æ–∫–µ–Ω)
- **404 Not Found** - —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω (–∫–æ–º–∞–Ω–¥–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, PR)
- **500 Internal Server Error** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞, –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–ª–Ω—ã–º —Å—Ç–µ–∫—Ç—Ä–µ–π—Å–æ–º (–±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)

**–í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤:**
```go
// –ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ handlers
if err := c.ShouldBindJSON(&req); err != nil {
    c.JSON(400, gin.H{"error": gin.H{
        "code": "INVALID_REQUEST",
        "message": "invalid request body",
    }})
    return
}
```

–í—Å–µ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON —Å–æ–≥–ª–∞—Å–Ω–æ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

---

### 6. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î**

**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ `docker-compose up`?

**–†–µ—à–µ–Ω–∏–µ:** –í –∫–æ–¥–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –ë–î –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π.

---

### 7. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω **zerolog** –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤:

```go
log.Info().
Str("team_name", teamName).
Str("operation", "GetTeam").
Msg("fetching team")

log.Error().
Err(err).
Str("user_id", userID).
Msg("failed to deactivate user")
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- Production: JSON –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
- Development: Pretty console –ª–æ–≥–∏
- –£—Ä–æ–≤–Ω–∏: Info, Warn, Error

**Middleware –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –í—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- HTTP –º–µ—Ç–æ–¥, –ø—É—Ç—å, —Å—Ç–∞—Ç—É—Å
- –û—à–∏–±–∫–∏ –∏ stacktrace

---

### 8. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤:

#### Unit —Ç–µ—Å—Ç—ã
- Handlers —Å –º–æ–∫–∞–º–∏ —Å–µ—Ä–≤–∏—Å–∞
- Middleware (auth, logging, metrics)
- Service –ª–æ–≥–∏–∫–∞ —Å –º–æ–∫–∞–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- –ü–æ–∫—Ä—ã—Ç–∏–µ: ~75%

#### Integration —Ç–µ—Å—Ç—ã
- –†–µ–∞–ª—å–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è –ë–î (PostgreSQL –≤ Docker)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–ª–æ–µ–≤ –≤–º–µ—Å—Ç–µ
- –ò–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—É—é –ë–î

#### E2E —Ç–µ—Å—Ç—ã
- –ü–æ–ª–Ω—ã–π API workflow
- –†–µ–∞–ª—å–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ OpenAPI –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

#### Load —Ç–µ—Å—Ç—ã
- Apache Bench (ab)
- –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

**–ú–æ–∫–∏:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `go generate`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è mockery/testify
- –•—Ä–∞–Ω–∏—Ç—å—Å—è –≤ `internal/mocks/`

---

### 9. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏**

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ Prometheus + Grafana:

#### Prometheus –º–µ—Ç—Ä–∏–∫–∏
```go
// HTTP –º–µ—Ç—Ä–∏–∫–∏
http_requests_total{method, path, status}
http_request_duration_seconds{method, path}

// Database –º–µ—Ç—Ä–∏–∫–∏
db_queries_total{operation, table}
db_query_duration_seconds{operation, table}

// Service –º–µ—Ç—Ä–∏–∫–∏
service_operations_total{operation, status}
service_operation_duration_seconds{operation}
```

#### Grafana –¥–∞—à–±–æ—Ä–¥—ã
- HTTP Performance - RPS, latency, status codes
- Database Performance - query time, pool usage
- Service Teams - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Pull Requests - –º–µ—Ç—Ä–∏–∫–∏ PR –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
